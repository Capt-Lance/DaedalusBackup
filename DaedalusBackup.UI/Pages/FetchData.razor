@page "/fetchdata"
@using DaedalusBackup.UI.Data
@using DaedalusBackup.UI.Services
@inject HyperVService hvService
<h1>Weather forecast</h1>

<p>This component demonstrates fetching data from a service.</p>

@if (vms == null)
{
    <p>Loading VMs ...</p>
}
else 
{
    @foreach (var vm in vms)
    {
        <p>@vm.Name</p>
    }
}

@functions {
    List<VirtualMachine> vms;

    protected override async Task OnInitAsync()
    {
        vms = await hvService.GetVMs();
        Console.WriteLine("hello client");
    }
}
